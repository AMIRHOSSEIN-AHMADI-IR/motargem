/**
 * @file httpErrors.js
 * خلاصه یک‌خطی: این ماژول یک تابع کمکی برای تبدیل کدهای وضعیت HTTP به پیام‌های خطای کاربرپسند به زبان فارسی ارائه می‌دهد.
 * NOTE: Internal. برای نمایش بازخورد خطای واضح به کاربر در سراسر برنامه استفاده می‌شود.
 * Comments updated by AI: 2025-11-10
 */

// یک شیء که کدهای وضعیت HTTP را به پیام‌های خطای مشخص و قابل فهم برای کاربر نگاشت می‌کند.
const errorMessages = {
  // 4xx Client Error Responses - خطاهای سمت کاربر
  400: "درخواست ارسال‌شده نامعتبر است. این ممکن است به دلیل وجود کاراکترهای غیرمجاز در متن شما باشد.",
  401: "احراز هویت ناموفق بود. کلید API شما نامعتبر، منقضی شده یا اشتباه است.",
  402: "نیاز به پرداخت است. ممکن است سهمیه رایگان کلید API شما تمام شده باشد یا مشکلی در حساب پرداخت شما وجود داشته باشد.",
  403: "دسترسی به این سرویس مجاز نیست. لطفاً از فعال بودن کلید API خود اطمینان حاصل کنید. این خطا ممکن است به دلیل محدودیت‌های جغرافیایی (تحریم‌ها) نیز رخ دهد.",
  404: "سرویس ترجمه در آدرس مورد نظر یافت نشد. ممکن است API تغییر کرده باشد.",
  405: "متد درخواست (Method Not Allowed) غیرمجاز است. این یک خطای داخلی در برنامه است.",
  406: "سرور قادر به ارائه پاسخی با فرمت قابل قبول نیست (Not Acceptable).",
  407: "نیاز به احراز هویت پراکسی وجود دارد. لطفاً تنظیمات شبکه خود را بررسی کنید.",
  408: "زمان انتظار برای ارسال درخواست به پایان رسید. لطفاً اتصال اینترنت خود را بررسی کرده و دوباره تلاش کنید.",
  409: "درخواست شما با وضعیت فعلی سرور تداخل دارد (Conflict). لطفاً دوباره تلاش کنید.",
  410: "منبع درخواستی (مانند مدل زبان) برای همیشه حذف شده است.",
  411: "طول درخواست مشخص نشده است. این یک خطای داخلی در برنامه است.",
  412: "پیش‌شرط‌های مشخص‌شده در درخواست برآورده نشده است.",
  413: "حجم متن ارسالی بیش از حد مجاز سرور است. لطفاً متن را کوتاه‌تر کنید.",
  414: "آدرس URL درخواست طولانی‌تر از حد مجاز سرور است.",
  415: "نوع محتوای ارسالی توسط سرور پشتیبانی نمی‌شود. این یک خطای داخلی است.",
  416: "بخش درخواستی از منبع، نامعتبر یا خارج از محدوده است.",
  417: "انتظارات مشخص‌شده در هدر درخواست توسط سرور قابل برآورده شدن نیست.",
  429: "تعداد درخواست‌ها بیش از حد مجاز است. لطفاً چند دقیقه دیگر تلاش کنید یا از یک کلید API دیگر استفاده نمایید.",

  // 5xx Server Error Responses - خطاهای سمت سرور
  500: "سرور در پردازش درخواست شما با یک مشکل داخلی مواجه شد. لطفاً بعداً دوباره تلاش کنید.",
  501: "سرور قابلیت پردازش این نوع درخواست را ندارد (Not Implemented). این یک خطای سمت سرور است.",
  502: "پاسخ نامعتبر از سرور دریافت شد (Bad Gateway). لطفاً بعداً دوباره تلاش کنید.",
  503: "سرویس در حال حاضر به صورت موقت در دسترس نیست. این ممکن است به دلیل بار زیاد یا به‌روزرسانی سرور باشد.",
  504: "پاسخ از سرور در زمان مقرر دریافت نشد (Gateway Timeout). لطفاً اتصال اینترنت خود را بررسی کرده و دوباره تلاش کنید.",
  505: "سرور از نسخه پروتکل HTTP استفاده شده در درخواست پشتیبانی نمی‌کند. این یک خطای فنی سمت سرور است.",
  511: "نیاز به احراز هویت در شبکه دارید. لطفاً وارد شبکه Wi-Fi خود شوید (captive portal) یا اتصال اینترنت خود را بررسی کنید.",
};

/**
 * یک پیام خطای کاربرپسند را از کد وضعیت HTTP برمی‌گرداند.
 * @param {number} statusCode - کد وضعیت HTTP.
 * @returns {string} - یک پیام خطای کاربرپسند به زبان فارسی.
 */
export function getErrorMessage(statusCode) {
  // ابتدا بررسی می‌کند آیا یک پیام اختصاصی برای این کد خطا وجود دارد یا خیر.
  if (errorMessages[statusCode]) {
    return errorMessages[statusCode];
  }

  // اگر کد خطا در محدوده خطاهای کاربر (4xx) باشد اما پیام اختصاصی نداشته باشد، یک پیام عمومی برمی‌گرداند.
  if (statusCode >= 400 && statusCode < 500) {
    return `یک خطای مربوط به درخواست شما رخ داد. (کد: ${statusCode})`;
  }

  // اگر کد خطا در محدوده خطاهای سرور (5xx) باشد اما پیام اختصاصی نداشته باشد، یک پیام عمومی برمی‌گرداند.
  if (statusCode >= 500 && statusCode < 600) {
    return `یک خطای سمت سرور رخ داد. لطفاً بعداً تلاش کنید. (کد: ${statusCode})`;
  }

  // برای هر کد خطای دیگری، یک پیام ناشناخته برمی‌گرداند.
  return `یک خطای ناشناخته رخ داد. (کد: ${statusCode})`;
}
